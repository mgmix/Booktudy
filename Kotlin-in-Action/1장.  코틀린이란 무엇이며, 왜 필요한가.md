# 1장.  코틀린이란 무엇이며, 왜 필요한가?



### Kotlin 은 무엇인가?

>  코틀린 은 자바 플랫폼에서 돌아가는 새로운 프로그래밍 언어

간결하고, 실용적이며, 자바 코드와의 상호운용성(interoperability) 를 중시한다.

코틀린은 기존 자바 라이브러리나 프레임워크와 함께 잘 작동하며 성능도 자바와 같은 수준.

인텔의 멀티OS 엔진을 사용하면  코틀린을 iOS 디바이스에서 실행할 수 있다.



### 정적 타입 지정언어 (Statically typed)

자바와 마찬가지로 코틀린도 정적 타입 지정 언어

**정적 타입 지정 언어란 ?**

> 모든 프로그램 구성 요소의 타입을 컴파일 시점에 알 수 있고 프로그램안에서 객체의 필드나 메소드를 사용할 때마다 컴파일러가 타입을 검증 해준다는 뜻

동적 타입 (dynamically typed) 지정 언어와는 다르다. (JVM 에서 Grooby 나 JRuby 가 대표적인 동적 타입 지정 언어)

동적 타입 지정 언어 에서는 타입과 관계없이 모든 값을 변수에 넣을 수 있고, 메소드나 필드 접근에 대한 검증이 실행 시점에 일어나며, 그에 따라 코드가 더 짧아지고 데이터 구조를 더 유연하게 생성하고 사용 할 수 있다. 그렇기에 컴파일시 오류 검증을 못하고 실행시점에 오류가 발생한다.



코틀린은 자바와 다르게, 컴파일러가 문맥을 고려해 변수 타입을 경정하는 **<u>타입 추론 (Type inference)</u>** 가 되기 때문에 타입 선언을 생략 해도 된다.

모두 자바와 비슷하나, 중요한 특성으로 코틀린은 **<u>널이 될 수 있는 타입 (Nullable type) 을 지원</u>**한다는 점. 컴파일 시점에 Null Pointer Exception 이 발생 할 수 있는지 여부를 검사 할 수 있어 좀 더 프로그램의 신뢰성을 높일 수 있다.

또한 새로운  내용으로 **<u>함수 타입(function type) 에 대한 지원</u>** 이 있다. 



### 함수형 프로그래밍과 객체지향 프로그래밍

**함수형 프로그래밍의 핵심 개념**

- 일급 시민인 함수(First-class)

  > 함수를 일반 값 처럼 다룰 수 있다.
  >
  > 함수를 변수에 저장할 수있고, 함수를 인자로 다른 함수에 전달 할 수 있으며, 함수에서 새로운 함수를 만들어서 반환 할 수 있다.

- 불변성(Immutability) 

  > 함수형 프로그래밍 에서는 일단 만들어지고나면 내부 상태가 절대로 바뀌지 않는 불변 객체를 사용해 프로그램을 작성한다.

- 부수 효과 (Side effect) 없음

  > 함수형 프로그래밍에서는 입력이 같으면 항상 같은 출력을 내놓고 다른 객체의 상태를 변경하지 않으며 함수외부나 다른 바깥환경과 상호작용하지 않는 순수함수(Pure function) 를 사용



그래서 이렇게 쓰면 어떤 장점이 있는지?

1. **간결성** : 순수 함수를 값처럼 활용 할 수 있다면 더 강력한 추상화가 가능하며, 이를 바탕으로 코드 중복을 막을 수 있다
2. **다중 스레드 세이프 (Safe Multithreading)** : 불변 데이터 구조를 사용하고, 순수 함수를 적용한다면 다중 스레드 환경에서 같은 데이터를 여러 스레드가 변경할 수 없다. 
3. **테스트가 쉬워짐** : 부수 효과가 있는 함수는 테스트 시에 필요한 환경을 구성하는 setup 코드가 따로 필요하지만, 순수 함수는 setup 코드 없이 독립적으로 테스트가 가능하다



### 코틀린의 응용

코틀린 컴파일러가 생성한 바이트 코드는 일반적인 자바 코드와 똑같이 효율적으로 실행되기 때문에 성능 측면에서 아무런 손해가 없다.

대부분의 코틀린 표준 라이브러리 함수는 인자로 받은 람다 함수를 인라이닝(inlining) 한다. 따라서 람다를 사용해도 새로운 객체가 만들어지지 않으므로 객체 증가로 인해 가비지 컬렉션(GC) 가 늘어나서 프로그램이 자주 멈추는 일도 없다.



> inlining 이란 코드 자체가 복사되는 방식으로 컴파일 한다고 보면 된다. 람다를 사용할 때 컴파일러에 의해 자동 생성되는 익명 객체가, 인라이닝을 하게 되면 객체가 생성되지 않기에 오버헤드가 줄어든다.
>
> https://ko.wikipedia.org/wiki/%EC%9D%B8%EB%9D%BC%EC%9D%B8_%ED%99%95%EC%9E%A5



### 요약

- 코틀린은 타입 추론을 지원하는 정적 타입 지정언어.
- 객체 지향과 함수형 프로그래밍 스타일 모두 지원